{"version":3,"sources":["components/ImageGalleryItem/ImageGalleryItem.module.scss","components/Modal/Modal.module.scss","components/Container/Container.module.scss","components/Loader/Loader.module.scss","components/Button/Button.module.scss","components/ImageGallery/ImageGallery.module.scss","components/Container/Container.js","components/Searchbar/Searchbar.js","components/ImageGalleryItem/ImageGalleryItem.js","components/Loader/Loader.js","components/Button/Button.js","services/pixabay-api.js","components/ImageGallery/ImageGallery.js","components/Modal/Modal.js","components/App/App.js","index.js","components/Searchbar/Searchbar.module.scss"],"names":["module","exports","Container","children","className","s","Searchbar","state","value","handleChange","e","setState","target","toLowerCase","handleSubmit","preventDefault","trim","props","onSubmit","console","log","toast","error","SearchForm","this","type","SearchFormButton","SearchFormButtonLabel","SearchFormInput","autoComplete","autoFocus","placeholder","onChange","Component","defaultProps","propType","PropTypes","func","ImageGalleryItem","webformatURL","onSelect","onClick","src","alt","ImageGalleryItemImage","LoaderContainer","loaderContainer","color","height","width","timeout","Button","api","fetchImage","name","page","url","fetch","then","response","ok","json","data","hits","Promise","reject","Error","Status","ImageGallery","images","status","fetchApi","imageName","prevState","catch","finally","length","window","scrollTo","top","document","documentElement","scrollHeight","behavior","prevProps","Loader","map","id","largeImageURL","onSelectImage","modalRoot","querySelector","Modal","handleKeyDown","code","onClose","handleBackdropClick","currentTarget","addEventListener","removeEventListener","selectImage","createPortal","Overlay","App","selectedImage","handleFormSubmit","handleSelectImage","imageUrl","handleCloseModal","position","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.3c5f9636.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem\":\"ImageGalleryItem_ImageGalleryItem__11ho7\",\"ImageGalleryItemImage\":\"ImageGalleryItem_ImageGalleryItemImage__37-7s\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__qnha0\",\"Modal\":\"Modal_Modal__2stIR\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Container\":\"Container_Container__MA_pb\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loaderContainer\":\"Loader_loaderContainer__34roj\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__MhWrB\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__1knhH\"};","import PropTypes from \"prop-types\";\r\nimport s from \"./Container.module.scss\";\r\n\r\nconst Container = ({ children }) => {\r\n  return <div className={s.Container}>{children}</div>;\r\n};\r\n\r\nContainer.propTypes = {\r\n  children: PropTypes.node.isRequired,\r\n};\r\n\r\nexport default Container;\r\n","import { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport toast from \"react-hot-toast\";\r\nimport s from \"./Searchbar.module.scss\";\r\n\r\nclass Searchbar extends Component {\r\n  state = {\r\n    value: \"\",\r\n  };\r\n  handleChange = (e) => {\r\n    this.setState({ value: e.target.value.toLowerCase() });\r\n  };\r\n\r\n  handleSubmit = (e) => {\r\n    e.preventDefault();\r\n\r\n    if (this.state.value.trim() === \"\") {\r\n      toast.error(\"enter something\");\r\n      return;\r\n    }\r\n\r\n    // Проп который передается форме для вызова при сабмите\r\n    this.props.onSubmit(this.state.value);\r\n    console.log(this.state.value);\r\n    this.setState({ value: \"\" });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <header className={s.Searchbar}>\r\n        <form className={s.SearchForm} onSubmit={this.handleSubmit}>\r\n          <button type=\"submit\" className={s.SearchFormButton}>\r\n            <span className={s.SearchFormButtonLabel}>Search</span>\r\n          </button>\r\n          <input\r\n            className={s.SearchFormInput}\r\n            type=\"text\"\r\n            autoComplete=\"off\"\r\n            autoFocus\r\n            placeholder=\"Search images and photos\"\r\n            value={this.state.value}\r\n            onChange={this.handleChange}\r\n          />\r\n        </form>\r\n      </header>\r\n    );\r\n  }\r\n}\r\n\r\nSearchbar.defaultProps = {\r\n  onSubmit: () => null,\r\n};\r\n\r\nSearchbar.propType = {\r\n  onSubmit: PropTypes.func,\r\n};\r\n\r\nexport default Searchbar;\r\n","import PropTypes from \"prop-types\";\r\nimport s from \"./ImageGalleryItem.module.scss\";\r\n\r\nconst ImageGalleryItem = ({ webformatURL, onSelect }) => {\r\n  return (\r\n    <li className={s.ImageGalleryItem} onClick={onSelect}>\r\n      <img src={webformatURL} alt=\"\" className={s.ImageGalleryItemImage} />\r\n    </li>\r\n  );\r\n};\r\n\r\nImageGalleryItem.defaultProps = {\r\n  onSelect: () => null,\r\n};\r\n\r\nImageGalleryItem.propTypes = {\r\n  webformatURL: PropTypes.string.isRequired,\r\n  onSelect: PropTypes.func,\r\n};\r\n\r\nexport default ImageGalleryItem;\r\n","import Loader from \"react-loader-spinner\";\r\nimport s from \"./Loader.module.scss\";\r\n\r\nconst LoaderContainer = () => {\r\n  return (\r\n    <div className={s.loaderContainer}>\r\n      <Loader\r\n        type=\"Oval\"\r\n        color=\"#3f51b5\"\r\n        height={50}\r\n        width={70}\r\n        timeout={3000}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LoaderContainer;\r\n","import s from \"./Button.module.scss\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nconst Button = ({ onClick }) => {\r\n  return (\r\n    <button type=\"button\" onClick={onClick} className={s.Button}>\r\n      Load more\r\n    </button>\r\n  );\r\n};\r\n\r\nButton.defaultProps = {\r\n  onClick: () => null,\r\n};\r\n\r\nButton.propType = {\r\n  onClick: PropTypes.func,\r\n};\r\n\r\nexport default Button;\r\n","function fetchImage(name, page) {\r\n  const BASE_URL = \"https://pixabay.com/api\";\r\n  const API_KEY = \"21721855-87ebe3c583662dfcae4faca3d\";\r\n  const url = `${BASE_URL}/?q=${name}&page=${page}&key=${API_KEY}&image_type=photo&orientation=horizontal&per_page=12`;\r\n  return fetch(url).then((response) => {\r\n    if (response.ok) {\r\n      return response.json().then((data) => data.hits);\r\n    }\r\n\r\n    return Promise.reject(new Error(`Нет покемона с именем ${name}`));\r\n  });\r\n}\r\n\r\nconst api = {\r\n  fetchImage,\r\n};\r\n\r\nexport default api;\r\n","import { Component } from \"react\";\r\nimport toast from \"react-hot-toast\";\r\nimport PropTypes from \"prop-types\";\r\nimport ImageGalleryItem from \"../ImageGalleryItem/ImageGalleryItem\";\r\nimport LoaderContainer from \"../Loader/Loader\";\r\nimport Button from \"../Button/Button\";\r\nimport s from \"./ImageGallery.module.scss\";\r\nimport fetchApi from \"../../services/pixabay-api.js\";\r\n\r\nconst Status = {\r\n  IDLE: \"idle\",\r\n  PENDING: \"pending\",\r\n  RESOLVED: \"resolved\",\r\n  REJECTED: \"rejected\",\r\n};\r\n\r\nexport default class ImageGallery extends Component {\r\n  state = {\r\n    images: [],\r\n    page: 1,\r\n    error: null,\r\n    status: Status.IDLE,\r\n  };\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    const prevName = prevProps.imageName;\r\n    const nextName = this.props.imageName;\r\n    if (prevName !== nextName) {\r\n      this.setState({\r\n        page: 1,\r\n        images: [],\r\n        error: null,\r\n      });\r\n      this.fetchImage();\r\n    }\r\n  }\r\n\r\n  fetchImage = () => {\r\n    this.setState({ status: Status.PENDING });\r\n\r\n    fetchApi\r\n      .fetchImage(this.props.imageName, this.state.page)\r\n      .then((images) =>\r\n        this.setState((prevState) => ({\r\n          images: [...prevState.images, ...images],\r\n          status: Status.RESOLVED,\r\n          page: prevState.page + 1,\r\n        }))\r\n      )\r\n      .catch((error) => this.setState({ error, status: Status.REJECTED }))\r\n      .finally(() => {\r\n        this.state.images.length > 12 &&\r\n          window.scrollTo({\r\n            top: document.documentElement.scrollHeight,\r\n            behavior: \"smooth\",\r\n          });\r\n      });\r\n  };\r\n\r\n  render() {\r\n    const { images, status } = this.state;\r\n    console.log(images);\r\n\r\n    if (status === \"idle\") {\r\n      return <> </>;\r\n    }\r\n    if (status === \"pending\") {\r\n      return <LoaderContainer />;\r\n    }\r\n    if (status === \"resolved\") {\r\n      return (\r\n        <>\r\n          <ul className={s.ImageGallery}>\r\n            {images.map(({ id, webformatURL, largeImageURL }) => (\r\n              <ImageGalleryItem\r\n                key={id}\r\n                webformatURL={webformatURL}\r\n                onSelect={() => this.props.onSelectImage(largeImageURL)}\r\n              />\r\n            ))}\r\n          </ul>\r\n          {images.length !== 0 && <Button onClick={this.fetchImage} />}\r\n        </>\r\n      );\r\n    }\r\n    if (status === \"rejected\") {\r\n      return toast.error(\"no images for your search\");\r\n    }\r\n  }\r\n}\r\n\r\nImageGallery.defaultProps = {\r\n  imageName: null,\r\n  onSelectImage: () => null,\r\n};\r\n\r\nImageGallery.propTypes = {\r\n  images: PropTypes.arrayOf(\r\n    PropTypes.shape({\r\n      id: PropTypes.string.isRequired,\r\n      largeImageURL: PropTypes.string.isRequired,\r\n    })\r\n  ),\r\n  imageName: PropTypes.string,\r\n  onSelectImage: PropTypes.func,\r\n};\r\n","import React, { Component } from \"react\";\r\nimport { createPortal } from \"react-dom\";\r\nimport PropTypes from \"prop-types\";\r\nimport s from \"./Modal.module.scss\";\r\n\r\nconst modalRoot = document.querySelector(\"#modal-root\");\r\n\r\nexport class Modal extends Component {\r\n  componentDidMount() {\r\n    window.addEventListener(\"keydown\", this.handleKeyDown);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener(\"keydown\", this.handleKeyDown);\r\n  }\r\n\r\n  handleKeyDown = (e) => {\r\n    if (e.code === \"Escape\") {\r\n      this.props.onClose();\r\n    }\r\n  };\r\n\r\n  handleBackdropClick = (e) => {\r\n    if (e.currentTarget === e.target) {\r\n      this.props.onClose();\r\n    }\r\n  };\r\n\r\n  render() {\r\n    console.log(this.props.selectImage);\r\n    return createPortal(\r\n      <div className={s.Overlay} onClick={this.handleBackdropClick}>\r\n        <div className={s.Modal}>\r\n          <img src={this.props.selectImage} alt=\"\" />\r\n        </div>\r\n      </div>,\r\n      modalRoot\r\n    );\r\n  }\r\n}\r\n\r\nModal.defaultProps = {\r\n  onClose: () => null,\r\n};\r\n\r\nModal.propType = {\r\n  onClose: PropTypes.func,\r\n};\r\n\r\nexport default Modal;\r\n","import { Component } from \"react\";\nimport { Toaster } from \"react-hot-toast\";\nimport Container from \"../Container/Container\";\nimport Searchbar from \"../Searchbar/Searchbar\";\nimport ImageGallery from \"../ImageGallery/ImageGallery.js\";\nimport Modal from \"../Modal/Modal\";\n\nclass App extends Component {\n  state = {\n    imageName: null,\n    selectedImage: null,\n  };\n\n  handleFormSubmit = (value) => {\n    this.setState({ imageName: value });\n  };\n\n  handleSelectImage = (imageUrl) => this.setState({ selectedImage: imageUrl });\n\n  handleCloseModal = () => this.setState({ selectedImage: null });\n\n  render() {\n    return (\n      <Container>\n        <Searchbar onSubmit={this.handleFormSubmit} />\n        <ImageGallery\n          imageName={this.state.imageName}\n          onSelectImage={this.handleSelectImage}\n        />\n        {this.state.selectedImage && (\n          <Modal\n            selectImage={this.state.selectedImage}\n            onClose={this.handleCloseModal}\n          />\n        )}\n        <Toaster position=\"top-right\" />\n      </Container>\n    );\n  }\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"modern-normalize/modern-normalize.css\";\nimport \"./styles/base.module.scss\";\nimport App from \"./components/App/App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__2G322\",\"SearchForm\":\"Searchbar_SearchForm__34PIq\",\"SearchFormButton\":\"Searchbar_SearchFormButton__3V1eh\",\"SearchFormButtonLabel\":\"Searchbar_SearchFormButtonLabel__3ZMXh\",\"SearchFormInput\":\"Searchbar_SearchFormInput__73HFz\"};"],"sourceRoot":""}